---
title: "Demo #12 - DAUF"
subtitle: "Datadriven Analys och Uppföljning av KTHs Forskning"
author: "KTH Library & ITA"
date: "2025-12-05"
format: 
  kth-quarto-revealjs:
    title-slide-attributes:
      data-background-image: "assets/bg/pattern_blue_wide.png"
      data-background-size: "100%"
      data-background-position: contain
    footer: "DAUF - Demo 11 - 2025-12-05"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
# install.packages("devtools")
library(ktheme)
library(webshot)
library(DT)
library(ggplot2)
library(reshape2)
library(formattable)
library(readxl)
library(dplyr)
#library(kableExtra)
library(knitr)
library(htmltools)
library(htmlwidgets)

red <- function(txt) 
  sprintf("<font color='%s'>\n%s\n</font>", tolower(palette_kth()["cerise"]), txt)
green <- function(txt) 
  sprintf("<font color='%s'>\n%s\n</font>", tolower(palette_kth()["olive"]), txt)

#webshot::install_phantomjs()
#unlink("retrosearch-screenshot.png")

suppressPackageStartupMessages(library(magick))

# BG images that could be used

```

## Agenda {data-background="assets/bg/notes.png" data-background-size="cover"}

-   Status update for the **DAUF** project
-   New **ABM 2025** with overall result and updates
-   New beta version of **subject based KTH Research Information** app
-   News related to **data curation** - new version of DiVA coming
-   OpenAlex on Sunet
-   Future directions and your **questions and feedback**

## About the DAUF project

-   Creating services and tools for presentation of **research information data**, improved data flows and connecting data sources within KTH
-   Agile model with **2 week sprints**
-   Collaboration between **KTH Library, RSO and ITA**
-   Part of IT portfolio for Research (Delportfölj forskning), within in the object "Publicering och analys" 

# Status and progress update {data-background="assets/bg/kth-6.png" data-background-size="cover"}

## Progress overview - since last demo {data-background="assets/bg/plant.png" data-background-size="cover"}

-   This years version of **ABM** was released about a week ago

-   Recently released beta version of topics based **KTH Research Information**

-   POC for the **KTH Indicators** dashboard based on consolidated indicators collected from across KTH. 

-   Tests and prep for **GDP 2.0** (Gemensamma dataprojektet) - new standard for Swedish project data

-   Work to use OpenAlex to update DiVA, and to construct bibliometric database

## Annual Bibliometric Monitoring 2025 {.smaller}

[![](assets/img/ABM_start.png){height="350"}](https://kth.se/abm/)

Changes in ABM 2024

-   More interactive graphs (plotly)
-   Changed OA graph
-   Enabled selection of number of rows for co-publication tables
-   Some cosmetic changes

## Brief ABM results for KTH

-   Number of publications seems to have stabilized
-   Citations indicators relatively stable
-   Journal indicators stable but slightly increasing over last 5 years
-   Small changes in co-publication patterns
-   Share of Open Access publications sharply decreasing last year  
      - reasons unclear at the moment

## KTH Research Information - Topics (beta) {.smaller}

[![](assets/img/RI_subject.png){height="400"}](https://analysis.sys.kth.se/bibliometrics/app_direct/subject_ri)

-   Selection based on Web of Science Citation Topics
-   Three levels - macro, meso and micro
-   Otherwise similar to [KTH Research Information - Units](https://analysis.sys.kth.se/)

## Data curation and DiVA {.smaller}

- Harvest of DiVA through OAI-PMH --> database
- Can curate and annotate connected to this database
- Preperation for new DiVA 
- Ambition to decouple importing and curation from DiVA
- Preparation to use APIs to communicate with DiVA  

## DiVA curation and stats

- some summary data?

## DiVA harvesting

The DAUF project now harvests DiVA publication data using the OAI-PMH protocol which regularly updates a single file [duckdb](https://duckdb.org) database, openly available from object storage:

<https://data.bibliometrics.lib.kth.se/kthcorpus/oai.db>

> The database with the harvested information is currently about 4.4 GB large.It is reqularly updated and contains MODS and JSON representations of "all-kth" DiVA records.

## Swedish bibliometric resource based on OpenAlex

- 



## X

::::: columns
::: {.column width="60%"}

- Ambition at KTH to track visions and goals using indicators
- Project within *Strategisk verksamhetsanalys*
- Workshops to align avaliable data with goals
- Relatively manual data collection process from scattered systems at KTH
- Indicator report  + beta dashboard for testing purposes
- The intended user group is KTH leadership and it enables comparing indicators across schools

:::

::: {.column width="30%"}

![](assets/img/indicator_report.png){height="500"}
:::
:::::


# Data Curation

## Data infrastructure overview {.smaller}

::::: columns
::: {.column width="45%"}
### Object storage (S3)

-   An on-premise data lake is powered by [S3 storage using "minio"](https://min.io)
-   Data is curated and pushed to "minio" using automated processes to <https://data.bibliometrics.lib.kth.se>
-   Applications and data consumers can then read (and/or write) data there
-   See descriptions [here for available data](https://bibliometrics.lib.kth.se/RI_sources_KTH.html)
:::

::: {.column width="45%"}
### General Dataflow

```{r}
#| echo: false
#| output: asis

# https://mermaid-ascii.art/
# https://www.mermaidflow.app/editor

mermaid <- "flowchart TD

classDef red color:red
classDef blue color:blue
classDef green color:green

Data Sources:::red -->|Clean / Crosscheck / Transform| Curated Data:::blue -->|Write / POST| Object Storage (minio):::green -->|Read / GET| Data Consumer / Client:::blue"

html <- 
    "https://mermaid-ascii.art/generate" |> 
    httr2::request() |>
    httr2::req_body_multipart(mermaid = mermaid) |>
    httr2::req_perform() |>
    httr2::resp_body_string() 

diagram <-
    sprintf("<pre>%s</pre>", html)
```

`r diagram`
:::
:::::

## GDP

> GDP (Gemensamma data för projekt) is an effort of a number of Swedish research funders to create a ***common data model for project data***. The five funding agencies **Energimyndigheten, Formas, Forte, Vetenskapsrådet and Vinnova** is developing a standard which enables sharing of open data about fundings and related information.
>
> The standard is developed in cooperation with a reference group including universities and other organisations within the university sector, KTH is a participant in the reference group.

## GDP data mobilization

-   We have participated in reference group coordinated by SUNET for the GDP efforts in collaboration with partners, including Vinnova and other universities

-   An R package has been developed with a client - <https://github.com/KTH-Library/gdp>

-   Regular harvesting of data from the API is now available from object storage "minio" at KTH: <https://data.bibliometrics.lib.kth.se/projects/gdp/gdp.db>



## DiVA harvesting

The DAUF project now harvests DiVA publication data using the OAI-PMH protocol which regularly updates a single file [duckdb](https://duckdb.org) database, openly available from object storage:

<https://data.bibliometrics.lib.kth.se/kthcorpus/oai.db>

> The database with the harvested information is currently about 4.4 GB large.It is reqularly updated and contains MODS and JSON representations of "all-kth" DiVA records.


# Future work and discussion

## Future work and directions

-   x


Related activities

-   KTH Cris/Rims

-   KTH Insights/datastyrning (MS Fabric/Power BI) 


## Questions and Answers {.smaller}

Please provide your input in chat or verbally.

-   Questions, suggestions or comments?

If you prefer to give your feedback later or come up with questions after this demo, you are always welcome to email us at **biblioteket\@kth.se**.

### **Thank you for attending!**